(this.webpackJsonp2_2_homework=this.webpackJsonp2_2_homework||[]).push([[0],{10:function(t,e,n){"use strict";n.d(e,"b",(function(){return C})),n.d(e,"a",(function(){return w})),n.d(e,"c",(function(){return _}));var r,c,u,a,o=n(3),s=Object(o.b)("auth/registerRequest"),i=Object(o.b)("auth/registerSuccess"),b=Object(o.b)("auth/registerError"),j=Object(o.b)("auth/loginRequest"),l=Object(o.b)("auth/loginSuccess"),d=Object(o.b)("auth/loginError"),O={registerRequest:s,registerSuccess:i,registerError:b,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:j,loginSuccess:l,loginError:d,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},f=n(4),g=n(8),h={name:null,email:null},p=Object(o.c)(h,(r={},Object(f.a)(r,O.registerSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,O.loginSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,O.logoutSuccess,(function(){return h})),Object(f.a)(r,O.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),x=Object(o.c)(null,(c={},Object(f.a)(c,O.registerSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,O.loginSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,O.logoutSuccess,(function(){return null})),c)),m=function(t,e){return e.payload},v=Object(o.c)(null,(u={},Object(f.a)(u,O.registerError,m),Object(f.a)(u,O.loginError,m),Object(f.a)(u,O.logoutError,m),Object(f.a)(u,O.getCurrentUserError,m),u)),k=Object(o.c)(!1,(a={},Object(f.a)(a,O.registerSuccess,(function(){return!0})),Object(f.a)(a,O.loginSuccess,(function(){return!0})),Object(f.a)(a,O.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(a,O.registerError,(function(){return!1})),Object(f.a)(a,O.loginError,(function(){return!1})),Object(f.a)(a,O.getCurrentUserError,(function(){return!1})),Object(f.a)(a,O.logoutSuccess,(function(){return!1})),a)),C=Object(g.c)({user:p,token:x,error:v,isAuthenticated:k}),y=n(22),S=n.n(y),A=n(32),E=n(25),U=n.n(E);U.a.defaults.baseURL="https://connections-api.herokuapp.com";var R=function(t){U.a.defaults.headers.common.Authorization="Bearer ".concat(t)},w={register:function(t){return function(){var e=Object(A.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O.registerRequest()),e.prev=1,e.next=4,U.a.post("/users/signup",t);case 4:r=e.sent,R(r.data.token),n(O.registerSuccess(r.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),n(O.registerError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(A.a)(S.a.mark((function t(e){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(O.logoutRequest()),t.prev=1,t.next=4,U.a.post("/users/logout");case 4:e(O.logoutSuccess()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e(O.logoutError());case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(A.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O.loginRequest()),e.prev=1,e.next=4,U.a.post("/users/login",t);case 4:r=e.sent,R(r.data.token),n(O.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(O.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(A.a)(S.a.mark((function t(e,n){var r,c,u;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return R(c),e(O.getCurrentUserRequest()),t.prev=5,t.next=8,U.a.get("/users/current");case 8:u=t.sent,e(O.getCurrentUserSuccess(u.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(O.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},_={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name}}},100:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),u=n(24),a=n.n(u),o=(n(72),n(12)),s=n(20),i=n(63),b=n(39),j=n(3),l=n(23),d=n(64),O=n.n(d),f=n(10),g=n(51),h=Object(b.a)(Object(j.d)({serializableCheck:{ignoredActions:[l.a,l.f,l.b,l.c,l.d,l.e]}})),p={key:"auth",storage:O.a,whitelist:["token"]},x=Object(j.a)({reducer:{auth:Object(l.g)(p,f.b),contacts:g.a},middleware:h}),m={store:x,persistor:Object(l.h)(x)},v=n(47),k=n(48),C=n(50),y=n(49),S=n(65),A=n.n(S),E=n(2),U=function(t){var e=t.children;return Object(E.jsxs)("div",{className:A.a.Container,children:[" ",e," "]})},R={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#018383"}},w=Object(o.b)((function(t){return{isAuthenticated:f.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(E.jsxs)("nav",{children:[Object(E.jsx)(s.b,{to:"/",exact:!0,style:R.link,activeStyle:R.activeLink,children:"Home page"}),e&&Object(E.jsx)(s.b,{to:"/contacts",exact:!0,style:R.link,activeStyle:R.activeLink,children:"Contacts"})]})})),_=n.p+"static/media/default-avatar.ec148682.jpg",q=n(114),L=n(41),I=n.n(L),M={onLogout:f.a.logOut},T=Object(o.b)((function(t){return{name:f.c.getUsername(t),avatar:_}}),M)((function(t){var e=t.avatar,n=t.name,r=t.onLogout;return Object(E.jsxs)("div",{className:I.a.userMenuWrapper,children:[Object(E.jsx)("img",{src:e,alt:n,width:"32",className:I.a.userMenuAvatar}),Object(E.jsx)("span",{className:I.a.name,children:n}),Object(E.jsx)(q.a,{variant:"outlined",color:"white",onClick:r,children:"Logout"})]})})),z={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},W=function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)(s.b,{to:"/register",exact:!0,style:z.link,activeStyle:z.activeLink,children:"Register"}),Object(E.jsx)(s.b,{to:"/login",exact:!0,style:z.link,activeStyle:z.activeLink,children:"Login"})]})},B=Object(o.b)((function(t){return{isAuthenticated:f.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(E.jsxs)("header",{children:[Object(E.jsx)(w,{}),e?Object(E.jsx)(T,{}):Object(E.jsx)(W,{})]})})),N=n(26),D=n(40),G=n(6),F=Object(o.b)((function(t){return{isAuthenticated:f.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(D.a)(t,["component","isAuthenticated","redirectTo"]);return Object(E.jsx)(G.b,Object(N.a)(Object(N.a)({},c),{},{render:function(t){return n?Object(E.jsx)(e,Object(N.a)({},t)):Object(E.jsx)(G.a,{to:r})}}))})),H=Object(o.b)((function(t){return{isAuthenticated:f.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(D.a)(t,["component","isAuthenticated","redirectTo"]);return Object(E.jsx)(G.b,Object(N.a)(Object(N.a)({},c),{},{render:function(t){return n&&c.restricted?Object(E.jsx)(G.a,{to:r}):Object(E.jsx)(e,Object(N.a)({},t))}}))})),J=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,126))})),K=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,127))})),V=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,128))})),X=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,129))})),Z=function(t){Object(C.a)(n,t);var e=Object(y.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(k.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(E.jsxs)(U,{children:[Object(E.jsx)(B,{}),Object(E.jsx)(r.Suspense,{fallback:Object(E.jsx)("p",{children:"Loading..."}),children:Object(E.jsxs)(G.d,{children:[Object(E.jsx)(H,{exact:!0,path:"/",component:J}),Object(E.jsx)(H,{path:"/register",component:K,restricted:!0,redirectTo:"/contacts"}),Object(E.jsx)(H,{path:"/login",restricted:!0,component:V,redirectTo:"/contacts"}),Object(E.jsx)(F,{path:"/contacts",component:X,redirectTo:"/login"})]})})]})}}]),n}(r.Component),P={onGetCurrentUser:f.a.getCurrentUser},Q=Object(o.b)(null,P)(Z);a.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(o.a,{store:m.store,children:Object(E.jsx)(i.a,{loading:null,persistor:m.persistor,children:Object(E.jsx)(s.a,{children:Object(E.jsx)(Q,{})})})})}),document.getElementById("root"))},13:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return u})),n.d(e,"h",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return j})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return d}));var r=n(3),c=Object(r.b)("contacts/fetchContactsRequest"),u=Object(r.b)("contacts/fetchContactsSuccess"),a=Object(r.b)("contacts/fetchContactsError"),o=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),j=Object(r.b)("contacts/deleteContactSuccess"),l=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/changeFilter")},41:function(t,e,n){t.exports={userMenuAvatar:"user-menu_userMenuAvatar__1ksVe",userMenuWrapper:"user-menu_userMenuWrapper__3ZT9X",name:"user-menu_name__1-u5I"}},51:function(t,e,n){"use strict";var r,c,u=n(4),a=n(39),o=n(8),s=n(3),i=n(13),b=Object(s.c)([{id:"id-1",name:"Rosie Simpson",number:"459-12-56"},{id:"id-2",name:"Hermione Kline",number:"443-89-12"},{id:"id-3",name:"Eden Clements",number:"645-17-79"},{id:"id-4",name:"Annie Copeland",number:"227-91-26"}],(r={},Object(u.a)(r,i.j,(function(t,e){return e.payload})),Object(u.a)(r,i.c,(function(t,e){var n=e.payload;return[].concat(Object(a.a)(t),[n])})),Object(u.a)(r,i.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),j=Object(s.c)("",Object(u.a)({},i.d,(function(t,e){return e.payload}))),l=Object(s.c)(!1,(c={},Object(u.a)(c,i.i,(function(){return!0})),Object(u.a)(c,i.j,(function(){return!1})),Object(u.a)(c,i.h,(function(){return!1})),Object(u.a)(c,i.b,(function(){return!0})),Object(u.a)(c,i.c,(function(){return!1})),Object(u.a)(c,i.a,(function(){return!1})),Object(u.a)(c,i.f,(function(){return!0})),Object(u.a)(c,i.g,(function(){return!1})),Object(u.a)(c,i.e,(function(){return!1})),c));e.a=Object(o.c)({contacts:b,filter:j,loading:l})},65:function(t,e,n){t.exports={Container:"Container_Container__3eGWy"}},72:function(t,e,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.ba3fd22c.chunk.js.map